"use strict";(self.webpackChunklunox=self.webpackChunklunox||[]).push([[6204],{9613:(e,r,t)=>{t.d(r,{Zo:()=>l,kt:()=>m});var i=t(9496);function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,i)}return t}function a(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){n(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function c(e,r){if(null==e)return{};var t,i,n=function(e,r){if(null==e)return{};var t,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)t=o[i],r.indexOf(t)>=0||(n[t]=e[t]);return n}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t=o[i],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var s=i.createContext({}),p=function(e){var r=i.useContext(s),t=r;return e&&(t="function"==typeof e?e(r):a(a({},r),e)),t},l=function(e){var r=p(e.components);return i.createElement(s.Provider,{value:r},e.children)},d="mdxType",v={inlineCode:"code",wrapper:function(e){var r=e.children;return i.createElement(i.Fragment,{},r)}},u=i.forwardRef((function(e,r){var t=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),d=p(t),u=n,m=d["".concat(s,".").concat(u)]||d[u]||v[u]||o;return t?i.createElement(m,a(a({ref:r},l),{},{components:t})):i.createElement(m,a({ref:r},l))}));function m(e,r){var t=arguments,n=r&&r.mdxType;if("string"==typeof e||n){var o=t.length,a=new Array(o);a[0]=u;var c={};for(var s in r)hasOwnProperty.call(r,s)&&(c[s]=r[s]);c.originalType=e,c[d]="string"==typeof e?e:n,a[1]=c;for(var p=2;p<o;p++)a[p]=t[p];return i.createElement.apply(null,a)}return i.createElement.apply(null,t)}u.displayName="MDXCreateElement"},1851:(e,r,t)=>{t.r(r),t.d(r,{contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>c,toc:()=>s});var i=t(1163),n=(t(9496),t(9613));const o={sidebar_position:3},a="Service Provider",c={unversionedId:"architecture-concepts/service-provider",id:"architecture-concepts/service-provider",title:"Service Provider",description:"Lunox Service Providers have same concept with Laravel Service Providers. Service providers are the central place of all application bootstrapping. Your own application, as well as all of Lunox's core services, are bootstrapped via service providers.",source:"@site/i18n/id/docusaurus-plugin-content-docs/current/architecture-concepts/service-provider.md",sourceDirName:"architecture-concepts",slug:"/architecture-concepts/service-provider",permalink:"/id/docs/architecture-concepts/service-provider",editUrl:"https://github.com/kodepandai/lunox-website/edit/main/docs/architecture-concepts/service-provider.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Service Container",permalink:"/id/docs/architecture-concepts/service-container"},next:{title:"Facades",permalink:"/id/docs/architecture-concepts/facades"}},s=[{value:"Writing Service Provider",id:"writing-service-provider",children:[{value:"The Register Method",id:"the-register-method",children:[],level:3},{value:"The Boot Method",id:"the-boot-method",children:[],level:3},{value:"Registering Providers",id:"registering-providers",children:[],level:3}],level:2}],p={toc:s},l="wrapper";function d(e){let{components:r,...t}=e;return(0,n.kt)(l,(0,i.Z)({},p,t,{components:r,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"service-provider"},"Service Provider"),(0,n.kt)("p",null,"Lunox ",(0,n.kt)("strong",{parentName:"p"},"Service Providers")," have same concept with Laravel Service Providers. Service providers are the central place of all application bootstrapping. Your own application, as well as all of Lunox's core services, are bootstrapped via service providers."),(0,n.kt)("p",null,"All Service Providers are listed in ",(0,n.kt)("inlineCode",{parentName:"p"},"config/app.ts")," file. You will see ",(0,n.kt)("inlineCode",{parentName:"p"},"providers")," array in that file. You can update what Service Providers you want to register in ",(0,n.kt)("inlineCode",{parentName:"p"},"providers")," array."),(0,n.kt)("h2",{id:"writing-service-provider"},"Writing Service Provider"),(0,n.kt)("p",null,"You can make your own Service Providers and load it to your application. Check ",(0,n.kt)("inlineCode",{parentName:"p"},"app/Providers/RouteServiceProvider.ts")," for example how to use Service Provider. So basically Service Provider is just class that extends Lunox's ",(0,n.kt)("inlineCode",{parentName:"p"},"ServiceProvider"),"."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ts"},'import { Route, ServiceProvider } from "lunox";\n\nclass RouteServiceProvider extends ServiceProvider {\n  async register() {}\n  async boot() {\n    await Route.group(base_path("routes/web"));\n    await Route.prefix("/api").group(base_path("routes/api"));\n  }\n}\n\nexport default RouteServiceProvider;\n')),(0,n.kt)("p",null,"Service Provider has two async methods, ",(0,n.kt)("inlineCode",{parentName:"p"},"register")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"boot"),". Why async? because sometimes we want to load file or do asyncronous thing in this place. For example in ",(0,n.kt)("inlineCode",{parentName:"p"},"RouteServiceProvider"),", we load all routes file from ",(0,n.kt)("inlineCode",{parentName:"p"},"routes/web")," folder and ",(0,n.kt)("inlineCode",{parentName:"p"},"routes/api")," folder. "),(0,n.kt)("h3",{id:"the-register-method"},"The Register Method"),(0,n.kt)("p",null,"Register method will run before you application is booted. So keep in mind that you can only bind things into the service container. If you want resolve some instance, do that in boot method instead. This is why on ",(0,n.kt)("inlineCode",{parentName:"p"},"RouteServiceProvider")," we load all routes in ",(0,n.kt)("inlineCode",{parentName:"p"},"boot")," method. Because ",(0,n.kt)("inlineCode",{parentName:"p"},"Route")," facade is not loaded yet in register method."),(0,n.kt)("p",null,"Within any your Service Providers, you will always has access to the application instance via ",(0,n.kt)("inlineCode",{parentName:"p"},"this.app")," that provide access to service container. Take a look at this simple Service Provider."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ts"},"// file: app/Providers/PaymentServiceProvider\n\nimport {ServiceProvider} from 'lunox';\nimport Payment from './Support/Payment';\n\nclass PaymentServiceProvider extends ServiceProvider {\n    async register(){\n        this.app.bind('payment', ()=>{\n            return new Payment(config('payment.service'));\n        })\n    }\n}\nexport default PaymentServiceProvider\n")),(0,n.kt)("h3",{id:"the-boot-method"},"The Boot Method"),(0,n.kt)("p",null,"This method is called after all other service providers have been registered, meaning you have all access to  all other services that have been registered by the framework. You can call database, resolve instance, or use Facades here. We will talk about ",(0,n.kt)("inlineCode",{parentName:"p"},"Facade")," later."),(0,n.kt)("h3",{id:"registering-providers"},"Registering Providers"),(0,n.kt)("p",null,"All service providers are registered in the ",(0,n.kt)("inlineCode",{parentName:"p"},"config/app.ts")," configuration file. To register your providers, add it to ",(0,n.kt)("inlineCode",{parentName:"p"},"providers")," array in that file."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ts"},"import PaymentServiceProvider from 'app/Providers/PaymentServiceProvider';\n...\n providers: [\n    // other service providers\n    PaymentServiceProvider,\n  ],\n...\n")))}d.isMDXComponent=!0}}]);