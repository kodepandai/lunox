"use strict";(self.webpackChunklunox=self.webpackChunklunox||[]).push([[13],{9613:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var r=n(9496);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(n),h=o,f=u["".concat(s,".").concat(h)]||u[h]||d[h]||a;return n?r.createElement(f,i(i({ref:t},p),{},{components:n})):r.createElement(f,i({ref:t},p))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=h;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:o,i[1]=l;for(var c=2;c<a;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},3249:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var r=n(1163),o=(n(9496),n(9613));const a={sidebar_position:1},i="Request Lifecycle",l={unversionedId:"architecture-concepts/request-lifecycle",id:"architecture-concepts/request-lifecycle",title:"Request Lifecycle",description:"If you are familiar with the php language, there are some conceptual differences in how requests are handled between Lunox and Laravel. In Laravel (using php), requests are handled by the application, and the application is terminated after each request. In Lunox (using nodejs), the application runs on an event loop, so it is not terminated but runs continuously. Therefore, it is important in Lunox to return a response or throw an exception for every request handled, to ensure that the application does not hang.",source:"@site/docs/architecture-concepts/request-lifecycle.md",sourceDirName:"architecture-concepts",slug:"/architecture-concepts/request-lifecycle",permalink:"/docs/architecture-concepts/request-lifecycle",draft:!1,editUrl:"https://github.com/kodepandai/lunox-website/edit/main/docs/architecture-concepts/request-lifecycle.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Run Your Lunox App",permalink:"/docs/installation/run-lunox-app"},next:{title:"Service Container",permalink:"/docs/architecture-concepts/service-container"}},s={},c=[{value:"Entry Point",id:"entry-point",level:2},{value:"HTTP Kernel",id:"http-kernel",level:3},{value:"Console Kernel",id:"console-kernel",level:3}],p={toc:c},u="wrapper";function d(e){let{components:t,...n}=e;return(0,o.kt)(u,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"request-lifecycle"},"Request Lifecycle"),(0,o.kt)("p",null,"If you are familiar with the ",(0,o.kt)("inlineCode",{parentName:"p"},"php")," language, there are some conceptual differences in how requests are handled between Lunox and Laravel. In Laravel (using ",(0,o.kt)("inlineCode",{parentName:"p"},"php"),"), requests are handled by the application, and the application is terminated after each request. In Lunox (using ",(0,o.kt)("inlineCode",{parentName:"p"},"nodejs"),"), the application runs on an event loop, so it is not terminated but runs continuously. Therefore, it is important in Lunox to return a response or throw an exception for every request handled, to ensure that the application does not hang."),(0,o.kt)("p",null,"Due to this difference, some Laravel features are handled differently in Lunox. Currently, singletons in Lunox are shared across the entire application. Therefore, it's important to create singletons only for instances that need to be shared globally."),(0,o.kt)("p",null,"To address the need for isolation between each HTTP request, we have implemented Async Local Storage (ASL) in the global request() helper. This allows for proper separation and isolation of data between requests. In the future, we plan to enhance the singleton sharing functionality to be scoped either to the entire application or to individual requests using ASL."),(0,o.kt)("h2",{id:"entry-point"},"Entry Point"),(0,o.kt)("p",null,"There are two types of entry points in a Lunox app: the HTTP entry point and the console entry point."),(0,o.kt)("h3",{id:"http-kernel"},"HTTP Kernel"),(0,o.kt)("p",null,"HTTP requests are handled by the HTTP Kernel. You can refer to the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/kodepandai/lunox/blob/next/presets/api/index.ts"},"index.ts")," file, which is where the HTTP Kernel is loaded to continuously handle all HTTP requests. All global functions (",(0,o.kt)("inlineCode",{parentName:"p"},"helpers"),") are loaded from the ",(0,o.kt)("inlineCode",{parentName:"p"},"autoload.ts")," file. The HTTP Kernel then bootstraps your application, loads the application config, and registers and boots all providers to the system."),(0,o.kt)("h3",{id:"console-kernel"},"Console Kernel"),(0,o.kt)("p",null,"For console applications (such as running artisan commands), Lunox uses the Console Kernel. The main file for this is ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/kodepandai/lunox/blob/next/presets/api/artisan.ts"},"artisan.ts"),'. This file loads the Console Kernel and initializes your application in the console. We will discuss more about this in the "Artisan" section.'))}d.isMDXComponent=!0}}]);