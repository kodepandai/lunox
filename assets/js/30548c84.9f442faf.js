"use strict";(self.webpackChunklunox=self.webpackChunklunox||[]).push([[2057],{9613:(e,r,t)=>{t.d(r,{Zo:()=>l,kt:()=>m});var i=t(9496);function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function n(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,i)}return t}function a(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?n(Object(t),!0).forEach((function(r){o(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function c(e,r){if(null==e)return{};var t,i,o=function(e,r){if(null==e)return{};var t,i,o={},n=Object.keys(e);for(i=0;i<n.length;i++)t=n[i],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)t=n[i],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=i.createContext({}),p=function(e){var r=i.useContext(s),t=r;return e&&(t="function"==typeof e?e(r):a(a({},r),e)),t},l=function(e){var r=p(e.components);return i.createElement(s.Provider,{value:r},e.children)},d="mdxType",v={inlineCode:"code",wrapper:function(e){var r=e.children;return i.createElement(i.Fragment,{},r)}},u=i.forwardRef((function(e,r){var t=e.components,o=e.mdxType,n=e.originalType,s=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),d=p(t),u=o,m=d["".concat(s,".").concat(u)]||d[u]||v[u]||n;return t?i.createElement(m,a(a({ref:r},l),{},{components:t})):i.createElement(m,a({ref:r},l))}));function m(e,r){var t=arguments,o=r&&r.mdxType;if("string"==typeof e||o){var n=t.length,a=new Array(n);a[0]=u;var c={};for(var s in r)hasOwnProperty.call(r,s)&&(c[s]=r[s]);c.originalType=e,c[d]="string"==typeof e?e:o,a[1]=c;for(var p=2;p<n;p++)a[p]=t[p];return i.createElement.apply(null,a)}return i.createElement.apply(null,t)}u.displayName="MDXCreateElement"},9555:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>s,contentTitle:()=>a,default:()=>v,frontMatter:()=>n,metadata:()=>c,toc:()=>p});var i=t(1163),o=(t(9496),t(9613));const n={sidebar_position:3},a="Service Provider",c={unversionedId:"architecture-concepts/service-provider",id:"architecture-concepts/service-provider",title:"Service Provider",description:"Lunox Service Providers follow the same concept as Laravel Service Providers. Service providers are the central place for all application bootstrapping. Both your own application and all of Lunox's core services are bootstrapped via service providers.",source:"@site/docs/architecture-concepts/service-provider.md",sourceDirName:"architecture-concepts",slug:"/architecture-concepts/service-provider",permalink:"/docs/architecture-concepts/service-provider",draft:!1,editUrl:"https://github.com/kodepandai/lunox-website/edit/main/docs/architecture-concepts/service-provider.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Service Container",permalink:"/docs/architecture-concepts/service-container"},next:{title:"Facades",permalink:"/docs/architecture-concepts/facades"}},s={},p=[{value:"Writing a Service Provider",id:"writing-a-service-provider",level:2},{value:"The Register Method",id:"the-register-method",level:3},{value:"The Boot Method",id:"the-boot-method",level:3},{value:"Registering Providers",id:"registering-providers",level:3}],l={toc:p},d="wrapper";function v(e){let{components:r,...t}=e;return(0,o.kt)(d,(0,i.Z)({},l,t,{components:r,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"service-provider"},"Service Provider"),(0,o.kt)("p",null,"Lunox ",(0,o.kt)("strong",{parentName:"p"},"Service Providers")," follow the same concept as Laravel Service Providers. Service providers are the central place for all application bootstrapping. Both your own application and all of Lunox's core services are bootstrapped via service providers."),(0,o.kt)("p",null,"All Service Providers are listed in the ",(0,o.kt)("inlineCode",{parentName:"p"},"config/app.ts")," file. You will find a ",(0,o.kt)("inlineCode",{parentName:"p"},"providers")," array in that file where you can update which Service Providers you want to register."),(0,o.kt)("h2",{id:"writing-a-service-provider"},"Writing a Service Provider"),(0,o.kt)("p",null,"You can create your own Service Providers and load them into your application. Here's an example of how to use a Service Provider by looking at ",(0,o.kt)("inlineCode",{parentName:"p"},"app/Providers/RouteServiceProvider.ts"),". Essentially, a Service Provider is just a class that extends Lunox's ",(0,o.kt)("inlineCode",{parentName:"p"},"ServiceProvider"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'import { Route } from "@lunoxjs/core/facades";\nimport { Route, ServiceProvider } from "@lunoxjs/core";\n\nclass RouteServiceProvider extends ServiceProvider {\n  async register() {}\n  async boot() {\n    await Route.group(base_path("routes/web"));\n    await Route.prefix("/api").group(base_path("routes/api"));\n  }\n}\n\nexport default RouteServiceProvider;\n')),(0,o.kt)("p",null,"A Service Provider has two async methods, ",(0,o.kt)("inlineCode",{parentName:"p"},"register")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"boot"),". These methods are marked async because sometimes we might want to load files or perform asynchronous operations in this place. For example, in ",(0,o.kt)("inlineCode",{parentName:"p"},"RouteServiceProvider"),", we load all route files from the ",(0,o.kt)("inlineCode",{parentName:"p"},"routes/web")," folder and the ",(0,o.kt)("inlineCode",{parentName:"p"},"routes/api")," folder."),(0,o.kt)("h3",{id:"the-register-method"},"The Register Method"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"register")," method will run before your application is fully booted. Therefore, you can only bind things into the service container at this point. If you want to resolve some instance, do that in the ",(0,o.kt)("inlineCode",{parentName:"p"},"boot")," method instead. That's why in ",(0,o.kt)("inlineCode",{parentName:"p"},"RouteServiceProvider")," we load all routes in the ",(0,o.kt)("inlineCode",{parentName:"p"},"boot")," method because the ",(0,o.kt)("inlineCode",{parentName:"p"},"Route")," facade is not available yet in the ",(0,o.kt)("inlineCode",{parentName:"p"},"register")," method."),(0,o.kt)("p",null,"Within any of your Service Providers, you will always have access to the application instance via ",(0,o.kt)("inlineCode",{parentName:"p"},"this.app"),", which provides access to the service container. Here's an example of a simple Service Provider:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'// file: app/Providers/PaymentServiceProvider\n\nimport { ServiceProvider } from "@lunoxjs/core";\nimport Payment from "./Support/Payment";\n\nclass PaymentServiceProvider extends ServiceProvider {\n  async register() {\n    this.app.bind("payment", () => {\n      return new Payment(config("payment.service"));\n    });\n  }\n}\nexport default PaymentServiceProvider;\n')),(0,o.kt)("h3",{id:"the-boot-method"},"The Boot Method"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"boot")," method is called after all other service providers have been registered, which means you have access to all other services that have been registered by the framework. You can call the database, resolve instances, or use Facades here (we'll talk about ",(0,o.kt)("inlineCode",{parentName:"p"},"Facades")," later)."),(0,o.kt)("h3",{id:"registering-providers"},"Registering Providers"),(0,o.kt)("p",null,"All service providers are registered in the ",(0,o.kt)("inlineCode",{parentName:"p"},"config/app.ts")," configuration file. To register your providers, add them to the ",(0,o.kt)("inlineCode",{parentName:"p"},"providers")," array in that file."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import PaymentServiceProvider from 'app/Providers/PaymentServiceProvider';\n// ...\n providers: [\n    // other service providers\n    PaymentServiceProvider,\n  ],\n// ...\n")))}v.isMDXComponent=!0}}]);